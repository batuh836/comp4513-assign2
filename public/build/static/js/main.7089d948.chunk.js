(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{170:function(e,t,r){},171:function(e,t,r){},184:function(e,t,r){},257:function(e,t,r){},258:function(e,t,r){},259:function(e,t,r){},260:function(e,t,r){},261:function(e,t,r){},262:function(e,t,r){},263:function(e,t,r){},273:function(e,t,r){},274:function(e,t,r){},276:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(24),c=r.n(s),i=(r(168),r(30)),l=(r(170),r(70)),o=r.n(l),j=r(72),u=r(90),h=r(91),b=r(92),d=r(109),p=r(108),x=(r(171),r(122)),O=r(25),f=r(56),y=(r(184),r(280)),m=r(279),v=r(283),g=r(284),C=r(157),k=r(114),S=r(3),T=y.a.Title,P=function(e){return Object(S.jsxs)("div",{className:"home",children:[Object(S.jsxs)("article",{className:"article",children:[Object(S.jsx)(T,{level:1,children:"Play Browser"}),Object(S.jsxs)(m.a,{children:[Object(S.jsx)(m.a.Item,{label:"Search Plays",children:Object(S.jsx)(v.a,{id:"title",type:"text"})}),Object(S.jsx)(m.a.Item,{children:Object(S.jsxs)(g.b,{children:[Object(S.jsx)(i.b,{to:"/play-list",children:Object(S.jsx)(C.a,{type:"primary",icon:Object(S.jsx)(k.a,{}),onClick:function(){var t=document.getElementById("title").value;e.setFilteredPlays({title:t},"title")},children:"Search Plays"})}),Object(S.jsx)(i.b,{to:"/play-list",children:Object(S.jsx)(C.a,{onClick:function(){e.setFilteredPlays({},"title")},children:"Show All Plays"})})]})})]})]}),Object(S.jsx)("p",{children:"Phantom of the Opera at Istana Budaya, Kuala Lumpur. World Tour 2019."})]})},F=r(277),w=r(278),D=(y.a.Title,function(e){return Object(S.jsxs)(F.a,{justify:"space-between",children:[Object(S.jsx)(w.a,{children:Object(S.jsx)(i.b,{to:"/home",component:y.a.Link,style:{fontSize:"2rem"},children:"Play Browser"})}),Object(S.jsx)(w.a,{children:Object(S.jsxs)(g.b,{children:[Object(S.jsx)(C.a,{onClick:function(){e.toggleAbout()},children:"About"}),Object(S.jsx)(C.a,{onClick:function(){e.toggleUser()},children:"Profile"}),Object(S.jsx)("a",{href:"https://comp4513-assign2.herokuapp.com/logout",children:Object(S.jsx)(C.a,{type:"primary",children:"Logout"})})]})})]})}),A=r(113),I=function(e){return Object(S.jsxs)(F.a,{justify:"space-between",style:{padding:"2px 10px",alignItems:"center"},children:[Object(S.jsx)(i.b,{to:"/play-detail",children:Object(S.jsx)("span",{onClick:function(){var t;t=e.play,console.log(t),e.setCurrentPlay(t)},style:{textTransform:"uppercase"},children:e.play.title})}),Object(S.jsx)(C.a,{type:"primary",onClick:function(){e.removeFromFavourites(e.play)},icon:Object(S.jsx)(A.a,{})})]})},N=r(282),L=(r(257),N.a.Header,N.a.Footer,N.a.Sider),M=(N.a.Content,y.a.Title),Y=function(e){return Object(S.jsxs)(L,{collapsible:!0,defaultCollapsed:!1,collapsedWidth:0,theme:"light",width:300,style:{paddingTop:"20px"},children:[Object(S.jsx)(M,{level:2,children:"Favourites"}),e.favourites.map((function(t){return Object(S.jsx)(I,{play:t,removeFromFavourites:e.removeFromFavourites,setCurrentPlay:e.setCurrentPlay})}))]})},B=r(80),E=r(285),G=r(281),H=y.a.Title,U=function(e){var t=m.a.useForm(),r=Object(B.a)(t,1)[0],a=n.a.useState(""),s=Object(B.a)(a,2),c=s[0],i=s[1],l=n.a.useState(!1),o=Object(B.a)(l,2),j=o[0],u=o[1],h=n.a.useState(!1),b=Object(B.a)(h,2),d=b[0],p=b[1];return Object(S.jsxs)(w.a,{span:6,style:{padding:"0px 20px"},children:[Object(S.jsx)(H,{level:2,children:"Play Filters"}),Object(S.jsxs)(m.a,{form:r,children:[Object(S.jsx)(m.a.Item,{label:"Title",name:"title",children:Object(S.jsx)(v.a,{id:"title",type:"text"})}),Object(S.jsx)(H,{level:3,children:"Year"}),Object(S.jsx)(m.a.Item,{label:"Before",name:"before",children:Object(S.jsxs)(g.b,{children:[Object(S.jsx)(E.a,{type:"checkbox",onChange:function(e){return u(e)}}),Object(S.jsx)(v.a,{id:"beforeYear",type:"text"})]})}),Object(S.jsx)(m.a.Item,{label:"After",name:"after",children:Object(S.jsxs)(g.b,{children:[Object(S.jsx)(E.a,{type:"checkbox",onChange:function(e){return p(e)}}),Object(S.jsx)(v.a,{id:"afterYear",type:"text"})]})}),Object(S.jsx)(m.a.Item,{label:"Genre",name:"genre",children:Object(S.jsx)(G.a,{onChange:function(e){return i(e)},children:e.genres.map((function(e,t){return Object(S.jsx)(G.a.Option,{value:e,children:e},t)}))})}),Object(S.jsx)(m.a.Item,{children:Object(S.jsxs)(g.b,{children:[Object(S.jsx)(C.a,{type:"primary",htmlType:"submit",onClick:function(){var t=document.getElementById("title").value,r=document.getElementById("beforeYear").value,a=document.getElementById("afterYear").value;e.setFilteredPlays({title:t,before:j,beforeYear:r,after:d,afterYear:a,genre:c},null,!0)},children:"Filter"}),Object(S.jsx)(C.a,{type:"reset",onClick:function(){r.resetFields(),e.setFilteredPlays({},null,!0)},children:"Clear"})]})})]})]})},W=function(e){return Object(S.jsx)("button",{onClick:function(){e.addToFavourites(e.play)},children:"\u2665"})},J=(r(258),function(e){var t=function(t){e.setFilteredPlays({},t.target.title,!1)},r=function(t){e.setCurrentPlay(t)};return e.plays&&e.plays.length>0?Object(S.jsxs)(w.a,{className:"play-matches",flex:"auto",style:{paddingLeft:"40px"},children:[Object(S.jsx)("h1",{children:"List/Matches"}),Object(S.jsx)("table",{children:Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{title:"title",onClick:t,children:"Title"}),Object(S.jsx)("th",{title:"year",onClick:t,children:"Year"}),Object(S.jsx)("th",{}),Object(S.jsx)("th",{})]})})}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"table-body",children:Object(S.jsx)("table",{children:Object(S.jsx)("tbody",{children:e.plays.map((function(t){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{onClick:function(){r(t)},children:Object(S.jsx)(i.b,{to:"/play-detail",children:t.title})}),Object(S.jsx)("td",{children:t.likelyDate}),Object(S.jsx)("td",{children:Object(S.jsx)(W,{play:t,addToFavourites:e.addToFavourites})}),Object(S.jsx)("td",{children:Object(S.jsx)(i.b,{to:"/play-detail",children:Object(S.jsx)("button",{onClick:function(){r(t)},children:"View"})})})]},t.id)}))})})}),Object(S.jsx)("hr",{})]}):Object(S.jsxs)(w.a,{className:"play-matches",flex:"auto",style:{padding:"40px"},children:[Object(S.jsx)("h1",{children:"List/Matches"}),Object(S.jsx)("p",{children:"No plays found!"})]})}),q=(r(259),N.a.Header),K=(N.a.Footer,N.a.Sider,N.a.Content),_=function(e){return Object(S.jsxs)(N.a,{children:[Object(S.jsx)(q,{children:Object(S.jsx)(D,{toggleAbout:e.toggleAbout,toggleUser:e.toggleUser})}),Object(S.jsxs)(N.a,{children:[Object(S.jsx)(Y,{favourites:e.favourites,removeFromFavourites:e.removeFromFavourites,setCurrentPlay:e.setCurrentPlay}),Object(S.jsx)(K,{style:{padding:"20px 40px"},children:Object(S.jsxs)(F.a,{justify:"space-between",children:[Object(S.jsx)(U,{filters:e.filters,setFilteredPlays:e.setFilteredPlays,genres:e.genres}),Object(S.jsx)(J,{plays:e.plays,setFilteredPlays:e.setFilteredPlays,addToFavourites:e.addToFavourites,setCurrentPlay:e.setCurrentPlay})]})})]})]})},z=(r(260),function(e){var t=function(){e.addToFavourites(e.play)},r=function(t){var r=t.target,a=r.name,n=r.value;e.setPlayFilter(a,n)};if("Text"===e.currentTab){var a=e.playData.acts,n=e.currentAct.scenes,s=["All Players"];return s.push.apply(s,Object(j.a)(Object(f.uniq)(e.currentScene.speeches.map((function(e){return e.speaker}))))),Object(S.jsxs)("div",{className:"play-overview",children:[Object(S.jsx)("h1",{children:e.play.title}),Object(S.jsx)("select",{name:"act",onChange:r,children:a.map((function(e){return Object(S.jsx)("option",{value:e.name,children:e.name},e.name)}))}),Object(S.jsx)("select",{name:"scene",onChange:r,children:n.map((function(e){return Object(S.jsx)("option",{value:e.name,children:e.name},e.name)}))}),Object(S.jsxs)("fieldset",{children:[Object(S.jsx)("select",{name:"character",onChange:r,children:s.map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))}),Object(S.jsx)("input",{type:"text",placeholder:"Enter a search term",onChange:function(t){e.setSearchText(t.target.value)}})]}),Object(S.jsx)(i.b,{to:"/play-list",children:Object(S.jsx)("button",{children:"Close"})}),Object(S.jsx)("button",{onClick:t,children:"\u2665"})]})}return Object(S.jsxs)("div",{className:"play-overview",children:[Object(S.jsx)("h1",{children:e.play.title}),Object(S.jsx)("p",{children:e.play.synopsis}),Object(S.jsx)(i.b,{to:"/play-list",children:Object(S.jsx)("button",{children:"Close"})}),Object(S.jsx)("button",{onClick:t,children:"\u2665"})]})}),V=(r(261),function(e){var t=function(t){t.target.title!==e.currentTab&&(t.target.classList.toggle("active"),e.setCurrentTab(t.target.title))},r=function(t){return t===e.currentTab?"active":""};return Object(S.jsx)("div",{className:"tab-bar",children:e.tabs.map((function(e){return Object(S.jsx)("button",{className:r(e),title:e,onClick:t,children:e},e)}))})}),Q=r(154),R=r.n(Q),X=(r(262),function(e){return"Details"===e.currentTab?Object(S.jsxs)("div",{className:"data-view",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Likely date of composition:"})," ",e.play.likelyDate]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Genre:"})," ",e.play.genre]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Wiki Link:"})," ",Object(S.jsx)("a",{href:e.play.wiki,children:e.play.wiki})]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Gutenberg:"})," ",Object(S.jsx)("a",{href:e.play.gutenberg,children:e.play.gutenberg})]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Shakespeare.org Link:"})," ",Object(S.jsx)("a",{href:e.play.shakespeareOrg,children:e.play.shakespeareOrg})]}),Object(S.jsx)("p",{children:Object(S.jsx)("strong",{children:"Description:"})}),Object(S.jsx)("p",{children:e.play.desc})]}):null===e.playData||null===e.currentAct?Object(S.jsx)("div",{className:"data-view"}):"Characters"===e.currentTab?Object(S.jsx)("div",{className:"data-view",children:e.playData.persona.map((function(e){return Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:e.player})," - ",e.desc?e.desc:"No description"]},e.player)}))}):Object(S.jsxs)("div",{className:"data-view",children:[Object(S.jsx)("h2",{children:e.playData.title}),Object(S.jsxs)("article",{id:"actHere",children:[Object(S.jsx)("h3",{children:e.currentAct.name}),Object(S.jsxs)("div",{id:"sceneHere",children:[Object(S.jsx)("h4",{children:e.currentScene.name}),Object(S.jsx)("p",{children:e.currentScene.title}),Object(S.jsx)("p",{children:e.currentScene.stageDirection}),e.currentScene.speeches.filter((function(t){return"All Players"===e.currentCharacter||e.currentCharacter===t.speaker})).map((function(t,r){return Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{className:"speaker",children:Object(S.jsx)("strong",{children:t.speaker})}),t.lines.map((function(t,r){return Object(S.jsx)("p",{className:"line",children:Object(S.jsx)(R.a,{searchWords:[e.searchText],textToHighlight:t})},r)}))]},r)}))]})]})]})}),Z=function(e){return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(V,{tabs:e.tabs,currentTab:e.currentTab,setCurrentTab:e.setCurrentTab}),Object(S.jsx)("hr",{}),Object(S.jsx)(X,{currentTab:e.currentTab,play:e.play,playData:e.playData,currentAct:e.currentAct,currentScene:e.currentScene,currentCharacter:e.currentCharacter,searchText:e.searchText}),Object(S.jsx)("hr",{})]})},$=(r(263),function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(h.a)(this,r);var n=["Details","Characters","Text"];return(a=t.call(this,e)).state={currentTab:n[0],tabs:e.play.filename?n:[n[0]],playData:[],currentAct:null,currentScene:null,currentCharacter:"All Players",searchText:""},a}return Object(b.a)(r,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,r,a,n,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.play.filename){e.next=26;break}if(t=this.props.savedPlayData.find((function(e){return e.id===c.props.play.id}))){e.next=23;break}return e.prev=3,r="https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/play.php?name="+this.props.play.id,e.next=7,fetch(r);case 7:return a=e.sent,e.next=10,a.json();case 10:n=e.sent,s=n[0].playText,this.setState({playData:s}),this.setState({currentAct:s.acts[0]}),this.setState({currentScene:s.acts[0].scenes[0]}),this.props.savePlayData(this.props.play,s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("fetch error");case 21:e.next=26;break;case 23:this.setState({playData:t.data}),this.setState({currentAct:t.data.acts[0]}),this.setState({currentScene:t.data.acts[0].scenes[0]});case 26:case"end":return e.stop()}}),e,this,[[3,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"play-detail hide-favourites",children:[Object(S.jsx)(Y,{favourites:this.props.favourites,removeFromFavourites:this.props.removeFromFavourites}),Object(S.jsx)(z,{currentTab:this.state.currentTab,play:this.props.play,playData:this.state.playData,currentAct:this.state.currentAct,currentScene:this.state.currentScene,addToFavourites:this.props.addToFavourites,setPlayFilter:function(t,r){if("act"===t){var a=e.state.playData.acts.find((function(e){return e.name===r}));e.setState({currentAct:a}),e.setState({currentScene:a.scenes[0]}),e.setState({currentCharacter:"All Players"})}else if("scene"===t){var n=e.state.currentAct.scenes.find((function(e){return e.name===r}));e.setState({currentScene:n}),e.setState({currentCharacter:"All Players"})}else"character"===t&&e.setState({currentCharacter:r})},setSearchText:function(t){e.setState({searchText:t})}}),Object(S.jsx)(Z,{currentTab:this.state.currentTab,tabs:this.state.tabs,play:this.props.play,playData:this.state.playData,currentAct:this.state.currentAct,currentScene:this.state.currentScene,currentCharacter:this.state.currentCharacter,searchText:this.state.searchText,setCurrentTab:function(t){e.setState({currentTab:t})}})]})}}]),r}(n.a.Component)),ee=$,te=r(106),re=r.n(te),ae=(r(273),function(e){return Object(S.jsxs)(re.a,{isOpen:e.modalIsOpen,contentLabel:"Example Modal",className:"about",children:[Object(S.jsx)("h2",{children:"About"}),Object(S.jsx)("p",{className:"subtitle",children:"Group Members"}),Object(S.jsx)("p",{children:"Brian Atuh"}),Object(S.jsx)("p",{children:"Olga Koldachenko"}),Object(S.jsx)("p",{className:"subtitle",children:"GitHub Link"}),Object(S.jsx)("p",{children:Object(S.jsx)("a",{href:"https://github.com/batuh836/comp4513-assign2",children:"comp4513_assign2"})}),Object(S.jsx)("button",{onClick:function(){e.toggleModal()},children:"Close"})]})}),ne=(r(274),function(e){if(e.user){var t=e.user.details,r=e.user.membership,a=e.user.picture;return Object(S.jsxs)(re.a,{isOpen:e.modalIsOpen,contentLabel:"Example Modal",className:"user",children:[Object(S.jsx)("h1",{children:"Profile"}),Object(S.jsxs)("span",{children:["Name: ",t.firstname," ",t.lastname]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{children:["Location: ",t.city,", ",t.country]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{children:["Joined: ",r.date_joined]}),Object(S.jsx)("br",{}),Object(S.jsx)("img",{src:a.thumbnail,alt:"picture"}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:function(){e.toggleModal()},children:"Close"})]})}return null}),se=(r(275),function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(h.a)(this,r),(a=t.call(this,e)).state={user:null,plays:[],genres:[],currentPlay:null,filteredPlays:[],favourites:[],savedPlayData:[],aboutIsOpen:!1,userIsOpen:!1},a}return Object(b.a)(r,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,r,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.user){e.next=15;break}return e.prev=1,"https://comp4513-assign2.herokuapp.com/user",e.next=5,fetch("https://comp4513-assign2.herokuapp.com/user");case 5:return t=e.sent,e.next=8,t.json();case 8:r=e.sent,this.setState({user:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("fetch error");case 15:if(this.state.plays.length){e.next=34;break}return e.prev=16,"https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/list.php",e.next=20,fetch("https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/list.php");case 20:return a=e.sent,e.next=23,a.json();case 23:n=e.sent,this.setState({plays:n}),this.setState({filteredPlays:n}),(s=[""]).push.apply(s,Object(j.a)(Object(f.uniq)(n.map((function(e){return e.genre}))))),this.setState({genres:s}),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(16),console.error("fetch error");case 34:case"end":return e.stop()}}),e,this,[[1,12],[16,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(){e.state.aboutIsOpen?e.setState({aboutIsOpen:!1}):e.setState({aboutIsOpen:!0})},r=function(){e.state.userIsOpen?e.setState({userIsOpen:!1}):e.setState({userIsOpen:!0})},a=function(t,r,a){var n=a?Object(f.cloneDeep)(e.state.plays):Object(f.cloneDeep)(e.state.filteredPlays);t.title&&(n=n.filter((function(e){return e.title.toLowerCase().includes(t.title.toLowerCase())}))),t.before&&t.beforeYear&&(n=n.filter((function(e){return e.likelyDate<t.beforeYear}))),t.after&&t.afterYear&&(n=n.filter((function(e){return e.likelyDate>t.afterYear}))),t.genre&&(n=n.filter((function(e){return e.genre===t.genre}))),r&&("title"===r?n=n.sort((function(e,t){var r=e.title.toLowerCase(),a=t.title.toLowerCase();return r>a?1:r<a?-1:0})):"year"===r&&(n=n.sort((function(e,t){return Number(e.likelyDate)-Number(t.likelyDate)})))),e.setState({filteredPlays:n})},n=function(t){var r=Object(j.a)(e.state.favourites);r.find((function(e){return e.id===t.id}))||r.push(t),e.setState({favourites:r})},s=function(t){var r=Object(j.a)(e.state.favourites),a=r.findIndex((function(e){return e.id===t.id}));r.splice(a,1),e.setState({favourites:r})};return Object(S.jsxs)("div",{className:"app",children:[Object(S.jsx)(O.a,{path:"/home",exact:!0,children:Object(S.jsx)(x.CSSTransitionGroup,{transitionName:"landing",transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:500,children:Object(S.jsx)(P,{setFilteredPlays:a})})}),Object(S.jsx)(O.a,{path:"/play-list",exact:!0,children:Object(S.jsx)(_,{plays:this.state.filteredPlays,genres:this.state.genres,favourites:this.state.favourites,filters:this.state.filters,setFilteredPlays:a,addToFavourites:n,removeFromFavourites:s,setCurrentPlay:function(t){e.setState({currentPlay:t})},toggleAbout:t,toggleUser:r})}),Object(S.jsx)(O.a,{path:"/play-detail",exact:!0,children:Object(S.jsx)(ee,{play:this.state.currentPlay,savedPlayData:this.state.savedPlayData,favourites:this.state.favourites,addToFavourites:n,removeFromFavourites:s,savePlayData:function(t,r){var a=Object(f.cloneDeep)(e.state.savedPlayData);a.push({id:t.id,data:r}),e.setState({savedPlayData:a})}})}),Object(S.jsx)(ae,{modalIsOpen:this.state.aboutIsOpen,toggleModal:t}),Object(S.jsx)(ne,{modalIsOpen:this.state.userIsOpen,toggleModal:r,user:this.state.user})]})}}]),r}(n.a.Component)),ce=se,ie=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,286)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(i.a,{children:Object(S.jsx)(ce,{})})}),document.getElementById("root")),ie()}},[[276,1,2]]]);
//# sourceMappingURL=main.7089d948.chunk.js.map